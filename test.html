<script>
window.onload = function () {
  var prdDetail = document.getElementById("prdDetail");
  var popupLinks = prdDetail.getElementsByTagName("a");
  var popupOverlay = document.getElementById("popup-overlay");
  var popupContainer = document.getElementById("popup-container");
  var popupClose = document.getElementById("popup-close");
  var popupContent = document.createElement("div");
  popupContent.id = "popup-content";

  // 먼저 popupClose를 추가한다.
  popupContainer.appendChild(popupClose);
  popupContainer.appendChild(popupContent);

  // 각 링크에 클릭 이벤트 리스너 추가
  for (var i = 0; i < popupLinks.length; i++) {
    popupLinks[i].addEventListener("click", function (event) {
      var href = this.getAttribute("href"); // 클릭한 링크의 href 값 가져오기

      // href 값이 '#'으로 시작하는 경우에만 팝업 동작 적용
      if (href.startsWith("#")) {
        var hrefs = href.replace("#", "").split(",");

        event.preventDefault(); // 링크 클릭 시 기본 동작 방지
        popupContent.innerHTML = ""; // Clear the content container for new images

        // For each image name in the hrefs array
        for (var j = 0; j < hrefs.length; j++) {
          var img = document.createElement("img");
          var imageName = hrefs[j];
          var imageSrc = "/web/nutrition_facts/" + imageName + ".jpg";
          img.src = imageSrc;
          img.style.width = "100%";
          img.style.marginBottom = "20px";
          popupContent.appendChild(img);
        }

        // 팝업 표시
        popupOverlay.style.display = "block";
      }
    });
  }

  // 팝업 닫기 버튼에 클릭 이벤트 리스너 추가
  popupClose.addEventListener("click", function () {
    popupOverlay.style.display = "none"; // 팝업 닫기
  });

  // 팝업 오버레이 클릭 이벤트 리스너 추가
  popupOverlay.addEventListener("click", function (event) {
    if (event.target === popupOverlay) {
      popupOverlay.style.display = "none"; // 팝업 닫기
    }
  });
};</script>